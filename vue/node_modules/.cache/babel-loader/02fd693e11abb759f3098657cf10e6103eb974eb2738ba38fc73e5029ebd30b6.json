{"ast":null,"code":"import Adopt from \"@/views/manager/Adopt.vue\";\nexport default {\n  name: \"Adopt\",\n  computed: {\n    Adopt() {\n      return Adopt;\n    }\n  },\n  data() {\n    return {\n      tableData: [],\n      // All data\n      pageNum: 1,\n      // Current page number\n      pageSize: 10,\n      // Number of items per page\n      total: 0,\n      title: null,\n      fromVisible: false,\n      form: {},\n      user: JSON.parse(localStorage.getItem('xm-user') || '{}'),\n      ids: []\n    };\n  },\n  created() {\n    this.load(1);\n  },\n  methods: {\n    handleAdd() {\n      // Add data\n      this.form = {}; // Clear data when adding new data\n      this.fromVisible = true; // Open the modal\n    },\n\n    handleEdit(row) {\n      // Edit data\n      this.form = JSON.parse(JSON.stringify(row)); // Deep copy data to form object\n      this.fromVisible = true; // Open the modal\n    },\n\n    save() {\n      // Logic triggered by save button, triggers add or update\n      this.$request({\n        url: this.form.id ? '/adopt/update' : '/adopt/add',\n        method: this.form.id ? 'PUT' : 'POST',\n        data: this.form\n      }).then(res => {\n        if (res.code === '200') {\n          // Indicates successful save\n          this.$message.success('Saved successfully');\n          this.load(1);\n          this.fromVisible = false;\n        } else {\n          this.$message.error(res.msg); // Show error message\n        }\n      });\n    },\n\n    GiveUp(row) {\n      this.$confirm('Are you sure you want to give up the adoption? Giving up the adoption means you will no longer be the potential adopter for this animal. If you have any concerns or need assistance, please contact our support team.', 'Confirm', {\n        type: \"warning\"\n      }).then(response => {\n        this.form = JSON.parse(JSON.stringify(row));\n        this.form.status = 'GiveUp Adoption';\n        this.save();\n      }).catch(() => {});\n    },\n    handleSelectionChange(rows) {\n      // Currently selected rows\n      this.ids = rows.map(v => v.id); //  [1,2]\n    },\n\n    delBatch() {\n      // Delete selected items\n      if (!this.ids.length) {\n        this.$message.warning('Please select data');\n        return;\n      }\n      this.$confirm('Are you sure you want to delete these data?', 'Confirm Delete', {\n        type: \"warning\"\n      }).then(response => {\n        this.$request.delete('/adopt/delete/batch', {\n          data: this.ids\n        }).then(res => {\n          if (res.code === '200') {\n            // Indicates successful operation\n            this.$message.success('Operation successful');\n            this.load(1);\n          } else {\n            this.$message.error(res.msg); // Show error message\n          }\n        });\n      }).catch(() => {});\n    },\n    load(pageNum) {\n      // Pagination query\n      if (pageNum) this.pageNum = pageNum;\n      this.$request.get('/adopt/selectPage', {\n        params: {\n          pageNum: this.pageNum,\n          pageSize: this.pageSize,\n          status: this.status\n        }\n      }).then(res => {\n        this.tableData = res.data?.list;\n        this.total = res.data?.total;\n        console.log(this.tableData);\n      });\n    },\n    reset() {\n      this.status = null;\n      this.load(1);\n    },\n    handleCurrentChange(pageNum) {\n      this.load(pageNum);\n    }\n  }\n};","map":{"version":3,"names":["Adopt","name","computed","data","tableData","pageNum","pageSize","total","title","fromVisible","form","user","JSON","parse","localStorage","getItem","ids","created","load","methods","handleAdd","handleEdit","row","stringify","save","$request","url","id","method","then","res","code","$message","success","error","msg","GiveUp","$confirm","type","response","status","catch","handleSelectionChange","rows","map","v","delBatch","length","warning","delete","get","params","list","console","log","reset","handleCurrentChange"],"sources":["src/views/manager/Adopt.vue"],"sourcesContent":["<template>\r\n  <div>\r\n    <div class=\"search\">\r\n<!--      <el-select v-model=\"animalId\" placeholder=\"Select By Pet Name\" style=\"width: 200px\" v-if=\"user.role === 'ADMIN'\">-->\r\n<!--        <el-option v-for=\"item in animalData\" :label=\"item.name\" :value=\"item.id\"></el-option>-->\r\n<!--      </el-select>-->\r\n      <el-select v-model=\"Adopt.status\" placeholder=\"Select By Status\" style=\"width: 200px; margin-left: 5px\">\r\n        <el-option label=\"Adopted\" value=\"Adopted\"></el-option>\r\n        <el-option label=\"Available\" value=\"Available\"></el-option>\r\n        <el-option label=\"GiveUp Adoption\" value=\"GiveUp Adoption\"></el-option>\r\n      </el-select>\r\n      <el-button type=\"info\" plain style=\"margin-left: 10px\" @click=\"load(1)\">Search</el-button>\r\n      <el-button type=\"warning\" plain style=\"margin-left: 10px\" @click=\"reset\">Reset</el-button>\r\n    </div>\r\n\r\n\r\n\r\n    <div class=\"table\">\r\n      <el-table :data=\"tableData\" stripe @selection-change=\"handleSelectionChange\">\r\n        <el-table-column type=\"selection\" width=\"55\" align=\"center\"></el-table-column>\r\n        <el-table-column prop=\"id\" label=\"ID\" width=\"80\" align=\"center\" sortable></el-table-column>\r\n        <el-table-column prop=\"animalImg\" label=\"Pets Image\" show-overflow-tooltip>\r\n          <template v-slot=\"scope\">\r\n            <div style=\"display: flex; align-items: center\">\r\n              <el-image style=\"width: 40px; height: 40px; border-radius: 50%\" v-if=\"scope.row.animalImg\"\r\n                        :src=\"scope.row.animalImg\" :preview-src-list=\"[scope.row.animalImg]\"></el-image>\r\n            </div>\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column prop=\"animalName\" label=\"Pets Name\" show-overflow-tooltip></el-table-column>\r\n        <el-table-column prop=\"userName\" label=\"Adopter\" show-overflow-tooltip></el-table-column>\r\n        <el-table-column prop=\"time\" label=\"Adopt Time\"></el-table-column>\r\n        <el-table-column prop=\"status\" label=\"Adoption Status\"></el-table-column>\r\n\r\n        <el-table-column label=\"Actions\" width=\"180\" align=\"center\">\r\n          <template v-slot=\"scope\">\r\n<!--            <el-button plain type=\"primary\" @click=\"handleEdit(scope.row)\" size=\"mini\">Edit</el-button>-->\r\n            <el-button plain type=\"danger\" size=\"mini\" :disabled=\"scope.row.status === 'GiveUp Adoption'\" @click=GiveUp(scope.row)>Give Up Adoption</el-button>\r\n          </template>\r\n        </el-table-column>\r\n      </el-table>\r\n\r\n      <div class=\"pagination\">\r\n        <el-pagination\r\n            background\r\n            @current-change=\"handleCurrentChange\"\r\n            :current-page=\"pageNum\"\r\n            :page-sizes=\"[5, 10, 20]\"\r\n            :page-size=\"pageSize\"\r\n            layout=\"total, prev, pager, next\"\r\n            :total=\"total\">\r\n        </el-pagination>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport Adopt from \"@/views/manager/Adopt.vue\";\r\n\r\nexport default {\r\n  name: \"Adopt\",\r\n  computed: {\r\n    Adopt() {\r\n      return Adopt\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      tableData: [],  // All data\r\n      pageNum: 1,   // Current page number\r\n      pageSize: 10,  // Number of items per page\r\n      total: 0,\r\n      title: null,\r\n      fromVisible: false,\r\n      form: {},\r\n      user: JSON.parse(localStorage.getItem('xm-user') || '{}'),\r\n      ids: []\r\n    }\r\n  },\r\n  created() {\r\n    this.load(1)\r\n  },\r\n  methods: {\r\n    handleAdd() {   // Add data\r\n      this.form = {}  // Clear data when adding new data\r\n      this.fromVisible = true   // Open the modal\r\n    },\r\n    handleEdit(row) {   // Edit data\r\n      this.form = JSON.parse(JSON.stringify(row))  // Deep copy data to form object\r\n      this.fromVisible = true   // Open the modal\r\n    },\r\n    save() {   // Logic triggered by save button, triggers add or update\r\n      this.$request({\r\n        url: this.form.id ? '/adopt/update' : '/adopt/add',\r\n        method: this.form.id ? 'PUT' : 'POST',\r\n        data: this.form\r\n      }).then(res => {\r\n        if (res.code === '200') {  // Indicates successful save\r\n          this.$message.success('Saved successfully')\r\n          this.load(1)\r\n          this.fromVisible = false\r\n        } else {\r\n          this.$message.error(res.msg)  // Show error message\r\n        }\r\n      })\r\n    },\r\n    GiveUp(row) {\r\n      this.$confirm('Are you sure you want to give up the adoption? Giving up the adoption means you will no longer be the potential adopter for this animal. If you have any concerns or need assistance, please contact our support team.', 'Confirm', {type: \"warning\"}).then(response => {\r\n        this.form = JSON.parse(JSON.stringify(row));\r\n        this.form.status = 'GiveUp Adoption';\r\n        this.save();\r\n      }).catch(() => {\r\n      })\r\n    },\r\n\r\n    handleSelectionChange(rows) {   // Currently selected rows\r\n      this.ids = rows.map(v => v.id)   //  [1,2]\r\n    },\r\n    delBatch() {   // Delete selected items\r\n      if (!this.ids.length) {\r\n        this.$message.warning('Please select data')\r\n        return\r\n      }\r\n      this.$confirm('Are you sure you want to delete these data?', 'Confirm Delete', {type: \"warning\"}).then(response => {\r\n        this.$request.delete('/adopt/delete/batch', {data: this.ids}).then(res => {\r\n          if (res.code === '200') {   // Indicates successful operation\r\n            this.$message.success('Operation successful')\r\n            this.load(1)\r\n          } else {\r\n            this.$message.error(res.msg)  // Show error message\r\n          }\r\n        })\r\n      }).catch(() => {\r\n      })\r\n    },\r\n    load(pageNum) {  // Pagination query\r\n      if (pageNum) this.pageNum = pageNum\r\n      this.$request.get('/adopt/selectPage', {\r\n        params: {\r\n          pageNum: this.pageNum,\r\n          pageSize: this.pageSize,\r\n          status: this.status,\r\n        }\r\n      }).then(res => {\r\n        this.tableData = res.data?.list\r\n        this.total = res.data?.total\r\n        console.log(this.tableData)\r\n      })\r\n    },\r\n    reset() {\r\n      this.status = null\r\n      this.load(1)\r\n    },\r\n    handleCurrentChange(pageNum) {\r\n      this.load(pageNum)\r\n    },\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>\r\n"],"mappings":"AA0DA,OAAAA,KAAA;AAEA;EACAC,IAAA;EACAC,QAAA;IACAF,MAAA;MACA,OAAAA,KAAA;IACA;EACA;EACAG,KAAA;IACA;MACAC,SAAA;MAAA;MACAC,OAAA;MAAA;MACAC,QAAA;MAAA;MACAC,KAAA;MACAC,KAAA;MACAC,WAAA;MACAC,IAAA;MACAC,IAAA,EAAAC,IAAA,CAAAC,KAAA,CAAAC,YAAA,CAAAC,OAAA;MACAC,GAAA;IACA;EACA;EACAC,QAAA;IACA,KAAAC,IAAA;EACA;EACAC,OAAA;IACAC,UAAA;MAAA;MACA,KAAAV,IAAA;MACA,KAAAD,WAAA;IACA;;IACAY,WAAAC,GAAA;MAAA;MACA,KAAAZ,IAAA,GAAAE,IAAA,CAAAC,KAAA,CAAAD,IAAA,CAAAW,SAAA,CAAAD,GAAA;MACA,KAAAb,WAAA;IACA;;IACAe,KAAA;MAAA;MACA,KAAAC,QAAA;QACAC,GAAA,OAAAhB,IAAA,CAAAiB,EAAA;QACAC,MAAA,OAAAlB,IAAA,CAAAiB,EAAA;QACAxB,IAAA,OAAAO;MACA,GAAAmB,IAAA,CAAAC,GAAA;QACA,IAAAA,GAAA,CAAAC,IAAA;UAAA;UACA,KAAAC,QAAA,CAAAC,OAAA;UACA,KAAAf,IAAA;UACA,KAAAT,WAAA;QACA;UACA,KAAAuB,QAAA,CAAAE,KAAA,CAAAJ,GAAA,CAAAK,GAAA;QACA;MACA;IACA;;IACAC,OAAAd,GAAA;MACA,KAAAe,QAAA;QAAAC,IAAA;MAAA,GAAAT,IAAA,CAAAU,QAAA;QACA,KAAA7B,IAAA,GAAAE,IAAA,CAAAC,KAAA,CAAAD,IAAA,CAAAW,SAAA,CAAAD,GAAA;QACA,KAAAZ,IAAA,CAAA8B,MAAA;QACA,KAAAhB,IAAA;MACA,GAAAiB,KAAA,QACA;IACA;IAEAC,sBAAAC,IAAA;MAAA;MACA,KAAA3B,GAAA,GAAA2B,IAAA,CAAAC,GAAA,CAAAC,CAAA,IAAAA,CAAA,CAAAlB,EAAA;IACA;;IACAmB,SAAA;MAAA;MACA,UAAA9B,GAAA,CAAA+B,MAAA;QACA,KAAAf,QAAA,CAAAgB,OAAA;QACA;MACA;MACA,KAAAX,QAAA;QAAAC,IAAA;MAAA,GAAAT,IAAA,CAAAU,QAAA;QACA,KAAAd,QAAA,CAAAwB,MAAA;UAAA9C,IAAA,OAAAa;QAAA,GAAAa,IAAA,CAAAC,GAAA;UACA,IAAAA,GAAA,CAAAC,IAAA;YAAA;YACA,KAAAC,QAAA,CAAAC,OAAA;YACA,KAAAf,IAAA;UACA;YACA,KAAAc,QAAA,CAAAE,KAAA,CAAAJ,GAAA,CAAAK,GAAA;UACA;QACA;MACA,GAAAM,KAAA,QACA;IACA;IACAvB,KAAAb,OAAA;MAAA;MACA,IAAAA,OAAA,OAAAA,OAAA,GAAAA,OAAA;MACA,KAAAoB,QAAA,CAAAyB,GAAA;QACAC,MAAA;UACA9C,OAAA,OAAAA,OAAA;UACAC,QAAA,OAAAA,QAAA;UACAkC,MAAA,OAAAA;QACA;MACA,GAAAX,IAAA,CAAAC,GAAA;QACA,KAAA1B,SAAA,GAAA0B,GAAA,CAAA3B,IAAA,EAAAiD,IAAA;QACA,KAAA7C,KAAA,GAAAuB,GAAA,CAAA3B,IAAA,EAAAI,KAAA;QACA8C,OAAA,CAAAC,GAAA,MAAAlD,SAAA;MACA;IACA;IACAmD,MAAA;MACA,KAAAf,MAAA;MACA,KAAAtB,IAAA;IACA;IACAsC,oBAAAnD,OAAA;MACA,KAAAa,IAAA,CAAAb,OAAA;IACA;EACA;AACA"},"metadata":{},"sourceType":"module","externalDependencies":[]}